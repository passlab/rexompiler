<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ROSE: Writing Git commit messages</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="ROSE"/>
<link href="roseDoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ROSE
   &#160;<span id="projectnumber">0.11.96.11</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,true,'search.html','Search');
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Writing Git commit messages<div class="ingroups"><a class="el" href="group__developer__docs.html">Library developers and collaborators</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>What constitutes a good Git commit message.</p>
<p>Each commit should ideally provide a single bug fix or (part of) a feature, and thus the comment should be quite focused. Each commit message consists of a title line and a body separated from one another by a blank line.</p>
<h1><a class="anchor" id="commit_messages_title"></a>
Titles</h1>
<ul>
<li>The title should start with a subject in parentheses. </li>
<li>Titles should be short, single-line statements. Details are in the body.</li>
</ul>
<p>Subjects are created on the fly. Their purpose is to make it easier for a human to scan a long list of commit titles to find certain things since it's faster to read a one or two word subject than it is to read a whole title. They also make it easier to visually group related commit titles. A few example subjects:</p>
<table class="doxtable">
<tr>
<td><b>Subject name</b></td><td><b>What it means</b> </td></tr>
<tr>
<td>Frontend, Binary Analysis</td><td>Some broad part of the ROSE library. </td></tr>
<tr>
<td>codethorn, compass2</td><td>A particular project that uses ROSE. </td></tr>
<tr>
<td>Attribute, Stack Delta</td><td>Some specific feature. </td></tr>
</table>
<p>Some examples of good commit titles:</p>
<ul>
<li>(Attributes) BinaryAnalysis::Attribute is moved </li>
<li>(move tool) one more test case for comments handling </li>
<li>(C++11) Minor fixes to compile ROSE with C++11 </li>
<li>(Tutorial) Fixed link error in tutorial</li>
</ul>
<h1><a class="anchor" id="commit_messages_body"></a>
Body</h1>
<p>The body provides details that are missing from the title and which are not easily evident from the patch. Some examples about what is good for a commit message body:</p>
<ul>
<li>The <b>general overview</b> of what changed. Often the patch is so detailed and/or spread out that it's hard to otherwise discern what really changed. For instance, if test answers are updated the commit should explain why the answer changed. </li>
<li>Where the commit came from, if not from the committer. For instance, if the commit was a patch submitted by a user it is polite to <b>thank the user</b> or the organization (provided they don't object). </li>
<li>If controversial, the commit should mention its <b>provenance</b>. Perhaps it came from developer consensus at a team meeting. Otherwise someone who wasn't privy to that information might revert the commit later. </li>
<li><b>Changes that affect users</b> should be listed including what the user needs to change in their own code. Some of our users know how to use Git and will either look through the commit messages before merging or will search the commit messages when they have a compile error due to changed names. (On a similar note, try not to change the API without first using ROSE_DEPRECATED for a suitable period of time.) </li>
<li>The body should <b>reference a JIRA issue</b> if the commit is related to an issue, especially if that issue has relevant details, discussion, test cases, etc. Place the issue name as the last line of the commit message, one issue per line for the sake of automated tools. Most commits should correspond to at least one JIRA issue. Git has tools for searching for commits that affect a JIRA issue (e.g., "git log --grep '^ROSE-1234'").</li>
</ul>
<p>The body must be separated from the title by a blank line because some Git tools concatenate the first lines together into a single title line, which creates formatting problems since the title then becomes very long. Also, although ROSE uses a 130-column policy throughout, commit messages should try to keep lines around 80-characters because that works better in GUIs like github and qgit.</p>
<p>Make sure your message is spelled correctly since it cannot be changed once it's merged into a release branch&ndash;at least not without a very disruptive history rewrite. Commit messages are for posterity, so be careful. "I hate git", commit <a href="https://github.com/rose-compiler/rose/commit/a53823f">a53823f</a>, was unprofessional but is now effectively permanent.</p>
<h1><a class="anchor" id="commit_messages_examples"></a>
Examples of good commit messages</h1>
<p>This commit message makes it clear what users must change in their code:</p>
<pre class="fragment">   (Binary Analysis) Changed names for some classes in the new SymbolicExpr
   
   SymbolicExpr::TreeNode         -&gt; SymbolicExpr::Node
   SymbolicExpr::TreeNodePtr      -&gt; SymbolicExpr::Ptr
   SymbolicExpr::LeafNodePtr      -&gt; SymbolicExpr::LeafPtr
   SymbolicExpr::InternalNodePtr  -&gt; SymbolicExpr::InternalPtr

   BINARY-123
</pre><p>This commit makes it clear to the simulator2 project maintainer why a change was made since it was changed by someone that doesn't normally work on that project:</p>
<pre class="fragment">   (Simulator2) Add Linux conditional around statfs::f_flags
   
   statfs::f_flags is only available since Linux 2.6.36.
   Our internal RHEL5 testing servers are Linux 2.6.18.

   ROSE-123
</pre><p>This commit explains why a change was made, which is not evident from the change itself:</p>
<pre class="fragment">   (Git) Update .gitmodules to point to release repositories
   
   This decision was reached during a team meeting with Dan,
   Markus, Leo, Justin, and Pei-Hung.
   
   The solution:
   
   1. Merge the rose/scratch/edg.git branches into the
      rose/edg4x/edg.git repository.
   
   2. Update .gitmodules to point to the rose/edg4x/edg.git
      release repository.
   
   3. Remove the rose/scratch/edg.git repository once it
      has been entirely merged into the rose/edg4x/edg.git
      repository.

   ROSE-123
   JENKINS-456
</pre><h1><a class="anchor" id="commit_messages_jira"></a>
JIRA Issues</h1>
<p>To search for which commits implement a certain JIRA issue, use this command:</p>
<div class="fragment"><div class="line">git log --grep <span class="stringliteral">&#39;^ROSE-1234&#39;</span></div>
</div><!-- fragment --><p>In a shell script, to get the list of all the JIRA issues for a particular commit, use this command:</p>
<div class="fragment"><div class="line">git log -n1 --format=<span class="stringliteral">&#39;%B&#39;</span> $commit_sha1 |grep <span class="stringliteral">&#39;^[A-Z]\+-[1-9][0-9]*$&#39;</span></div>
</div><!-- fragment --> <div class="dynheader">
Collaboration diagram for Writing Git commit messages:</div>
<div class="dyncontent">
<div class="center"><img src="group__commit__messages.png" border="0" usemap="#group____commit____messages" alt=""/></div>
<map name="group____commit____messages" id="group____commit____messages">
<area shape="rect" title=" " alt="" coords="181,5,312,45"/>
<area shape="rect" href="group__developer__docs.html" title="Documentation oriented toward those working on ROSE." alt="" coords="5,5,133,45"/>
</map>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 19 2022 23:39:55 for ROSE by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
