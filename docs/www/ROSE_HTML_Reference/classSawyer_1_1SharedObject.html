<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ROSE: Sawyer::SharedObject Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="ROSE"/>
<link href="roseDoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ROSE
   &#160;<span id="projectnumber">0.11.96.11</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,true,'search.html','Search');
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceSawyer.html">Sawyer</a></li><li class="navelem"><a class="el" href="classSawyer_1_1SharedObject.html">SharedObject</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classSawyer_1_1SharedObject-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Sawyer::SharedObject Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<div class="textblock"><p>Base class for reference counted objects. </p>
<p>The <a class="el" href="classSawyer_1_1SharedObject.html">SharedObject</a> class is used in conjunction with <a class="el" href="classSawyer_1_1SharedPointer.html">SharedPointer</a> to declare that objects of this type are allocated on the heap (only), are reference counted, and invoke "delete" on themselves when the reference count decreases to zero. Any object that is intended to be referenced by a <a class="el" href="classSawyer_1_1SharedPointer.html">SharedPointer</a> must inherit directly or indirectly from <a class="el" href="classSawyer_1_1SharedObject.html">SharedObject</a>.</p>
<p>Here's an example that demonstrates some of the best practices:</p>
<ul>
<li>Provide a declaration for the pointer by appending "Ptr" to the class name.</li>
</ul>
<ul>
<li>Inherit from <a class="el" href="classSawyer_1_1SharedObject.html">SharedObject</a> just once in the entire class hierarchy, normally in the base class.</li>
</ul>
<ul>
<li>Provide a public "Ptr" member type that's equivalent to the forward-declared pointer type.</li>
</ul>
<ul>
<li>Make all constructors "protected" so that users are less likely to construct objects without allocating them in the heap.</li>
</ul>
<ul>
<li>Provide static member functions named "instance", one per constructor, that allocate the object on the heap and return its first reference-counting pointer.</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// Forward declarations if necessary</span></div>
<div class="line"><span class="keyword">class </span>MyBaseClass;</div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="classSawyer_1_1SharedPointer.html">Sawyer::SharedPointer&lt;MyBaseClass&gt;</a> MyBaseClassPtr;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Class definition</span></div>
<div class="line"><span class="keyword">class </span>MyBaseClass: <span class="keyword">public</span> <a class="code" href="classSawyer_1_1SharedObject.html#af65fdccd9575d75238c9ce5615b102bb">SharedObject</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">typedef</span> <a class="code" href="classSawyer_1_1SharedPointer.html">Sawyer::SharedPointer&lt;MyBaseClass&gt;</a> Ptr;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">    <span class="comment">// Hide the constructors so users don&#39;t accidentally create objects on the stack</span></div>
<div class="line">    MyBaseClass();</div>
<div class="line">    MyBaseClass(<span class="keyword">const</span> MyBaseClass&amp;);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="comment">// Provide allocating wrappers around the constructors</span></div>
<div class="line">    <span class="keyword">static</span> Ptr instance() {</div>
<div class="line">        <span class="keywordflow">return</span> Ptr(<span class="keyword">new</span> MyBaseClass);</div>
<div class="line">    }</div>
<div class="line">    <span class="keyword">static</span> Ptr instance(<span class="keyword">const</span> MyBaseClass &amp;other) {</div>
<div class="line">        <span class="keywordflow">return</span> Ptr(<span class="keyword">new</span> MyBaseClass(other));</div>
<div class="line">    }</div>
<div class="line">};</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="classSawyer_1_1SharedPointer.html" title="Reference-counting intrusive smart pointer.">SharedPointer</a>, <a class="el" href="classSawyer_1_1SharedFromThis.html">SharedFromThis</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="SharedObject_8h_source.html#l00064">64</a> of file <a class="el" href="SharedObject_8h_source.html">SharedObject.h</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="SharedObject_8h_source.html">util/Sawyer/SharedObject.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Sawyer::SharedObject:</div>
<div class="dyncontent">
<div class="center"><img src="classSawyer_1_1SharedObject__inherit__graph.png" border="0" usemap="#Sawyer_1_1SharedObject_inherit__map" alt="Inheritance graph"/></div>
<map name="Sawyer_1_1SharedObject_inherit__map" id="Sawyer_1_1SharedObject_inherit__map">
<area shape="rect" title="Base class for reference counted objects." alt="" coords="5,437,159,464"/>
<area shape="rect" href="classSawyer_1_1Container_1_1Buffer.html" title=" " alt="" coords="608,18,784,59"/>
<area shape="rect" href="classSawyer_1_1Container_1_1Buffer.html" title=" " alt="" coords="624,93,768,149"/>
<area shape="rect" href="classSawyer_1_1Container_1_1Buffer.html" title=" " alt="" coords="621,193,771,234"/>
<area shape="rect" href="classRose_1_1CommandLine_1_1SelfTest.html" title="Base class for self tests." alt="" coords="232,279,385,321"/>
<area shape="rect" href="classRose_1_1Progress.html" title="A general, thread&#45;safe way to report progress made on some task." alt="" coords="252,345,365,372"/>
<area shape="rect" href="classSawyer_1_1CommandLine_1_1SwitchAction.html" title="Base class for switch actions." alt="" coords="229,397,388,438"/>
<area shape="rect" href="classSawyer_1_1CommandLine_1_1ValueAugmenter.html" title="Base class for value agumentors." alt="" coords="229,462,388,503"/>
<area shape="rect" href="classSawyer_1_1CommandLine_1_1ValueParser.html" title="Base class parsing a value from input." alt="" coords="229,527,388,569"/>
<area shape="rect" href="classSawyer_1_1CommandLine_1_1ValueSaver.html" title=" " alt="" coords="229,593,388,634"/>
<area shape="rect" href="classSawyer_1_1Container_1_1Buffer.html" title="Base class for all buffers." alt="" coords="239,94,378,135"/>
<area shape="rect" href="classSawyer_1_1Document_1_1Markup_1_1Function.html" title="Base class for markup functions." alt="" coords="216,658,401,699"/>
<area shape="rect" href="classSawyer_1_1Message_1_1Destination.html" title="Base class for all types of message destinations." alt="" coords="208,724,409,751"/>
<area shape="rect" href="classSawyer_1_1Message_1_1Gang.html" title=" " alt="" coords="225,775,392,801"/>
<area shape="rect" href="classSawyer_1_1Message_1_1Prefix.html" title="Information printed at the beginning of each free&#45;format message." alt="" coords="224,825,393,852"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af65fdccd9575d75238c9ce5615b102bb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSawyer_1_1SharedObject.html#af65fdccd9575d75238c9ce5615b102bb">SharedObject</a> ()</td></tr>
<tr class="memdesc:af65fdccd9575d75238c9ce5615b102bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="classSawyer_1_1SharedObject.html#af65fdccd9575d75238c9ce5615b102bb">More...</a><br /></td></tr>
<tr class="separator:af65fdccd9575d75238c9ce5615b102bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f1155ff49f2c62afd307c0168d6f84e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSawyer_1_1SharedObject.html#a4f1155ff49f2c62afd307c0168d6f84e">SharedObject</a> (const <a class="el" href="classSawyer_1_1SharedObject.html">SharedObject</a> &amp;)</td></tr>
<tr class="memdesc:a4f1155ff49f2c62afd307c0168d6f84e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy constructor.  <a href="classSawyer_1_1SharedObject.html#a4f1155ff49f2c62afd307c0168d6f84e">More...</a><br /></td></tr>
<tr class="separator:a4f1155ff49f2c62afd307c0168d6f84e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a0ad0a0708358bb6a27191dd375b404"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSawyer_1_1SharedObject.html#a5a0ad0a0708358bb6a27191dd375b404">~SharedObject</a> ()</td></tr>
<tr class="memdesc:a5a0ad0a0708358bb6a27191dd375b404"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual destructor.  <a href="classSawyer_1_1SharedObject.html#a5a0ad0a0708358bb6a27191dd375b404">More...</a><br /></td></tr>
<tr class="separator:a5a0ad0a0708358bb6a27191dd375b404"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38be1291d4c8843e37a82087d05243bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSawyer_1_1SharedObject.html">SharedObject</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSawyer_1_1SharedObject.html#a38be1291d4c8843e37a82087d05243bc">operator=</a> (const <a class="el" href="classSawyer_1_1SharedObject.html">SharedObject</a> &amp;)</td></tr>
<tr class="memdesc:a38be1291d4c8843e37a82087d05243bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assignment.  <a href="classSawyer_1_1SharedObject.html#a38be1291d4c8843e37a82087d05243bc">More...</a><br /></td></tr>
<tr class="separator:a38be1291d4c8843e37a82087d05243bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af65fdccd9575d75238c9ce5615b102bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af65fdccd9575d75238c9ce5615b102bb">&#9670;&nbsp;</a></span>SharedObject() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Sawyer::SharedObject::SharedObject </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default constructor. </p>
<p>Initializes the reference count to zero. </p>

<p class="definition">Definition at line <a class="el" href="SharedObject_8h_source.html#l00070">70</a> of file <a class="el" href="SharedObject_8h_source.html">SharedObject.h</a>.</p>

</div>
</div>
<a id="a4f1155ff49f2c62afd307c0168d6f84e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f1155ff49f2c62afd307c0168d6f84e">&#9670;&nbsp;</a></span>SharedObject() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Sawyer::SharedObject::SharedObject </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classSawyer_1_1SharedObject.html">SharedObject</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy constructor. </p>
<p>Shared objects are not typically copy-constructed, but we must support it anyway in case the user wants to copy-construct some shared object. The new object has a ref-count of zero. </p>

<p class="definition">Definition at line <a class="el" href="SharedObject_8h_source.html#l00076">76</a> of file <a class="el" href="SharedObject_8h_source.html">SharedObject.h</a>.</p>

</div>
</div>
<a id="a5a0ad0a0708358bb6a27191dd375b404"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a0ad0a0708358bb6a27191dd375b404">&#9670;&nbsp;</a></span>~SharedObject()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual Sawyer::SharedObject::~SharedObject </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Virtual destructor. </p>
<p>Verifies that the reference count is zero. </p>

<p class="definition">Definition at line <a class="el" href="SharedObject_8h_source.html#l00079">79</a> of file <a class="el" href="SharedObject_8h_source.html">SharedObject.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a38be1291d4c8843e37a82087d05243bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38be1291d4c8843e37a82087d05243bc">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSawyer_1_1SharedObject.html">SharedObject</a>&amp; Sawyer::SharedObject::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classSawyer_1_1SharedObject.html">SharedObject</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Assignment. </p>
<p>Assigning one object to another doesn't change the reference count or mutex of either object. </p>

<p class="definition">Definition at line <a class="el" href="SharedObject_8h_source.html#l00086">86</a> of file <a class="el" href="SharedObject_8h_source.html">SharedObject.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="SharedObject_8h_source.html">SharedObject.h</a></li>
</ul>
</div><!-- contents -->
<div class="ttc" id="aclassSawyer_1_1SharedObject_html_af65fdccd9575d75238c9ce5615b102bb"><div class="ttname"><a href="classSawyer_1_1SharedObject.html#af65fdccd9575d75238c9ce5615b102bb">Sawyer::SharedObject::SharedObject</a></div><div class="ttdeci">SharedObject()</div><div class="ttdoc">Default constructor.</div><div class="ttdef"><b>Definition:</b> <a href="SharedObject_8h_source.html#l00070">SharedObject.h:70</a></div></div>
<div class="ttc" id="aclassSawyer_1_1SharedPointer_html"><div class="ttname"><a href="classSawyer_1_1SharedPointer.html">Sawyer::SharedPointer</a></div><div class="ttdoc">Reference-counting intrusive smart pointer.</div><div class="ttdef"><b>Definition:</b> <a href="SharedPointer_8h_source.html#l00068">SharedPointer.h:68</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 8 2022 21:18:51 for ROSE by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
