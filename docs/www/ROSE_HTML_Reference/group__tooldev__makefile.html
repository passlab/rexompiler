<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ROSE: Build systems</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="ROSE"/>
<link href="roseDoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ROSE
   &#160;<span id="projectnumber">0.11.96.11</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,true,'search.html','Search');
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Build systems<div class="ingroups"><a class="el" href="group__tooldev.html">Developing ROSE-based tools</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>Using a build system to build tools.</p>
<p>Once the ROSE library has been configured, built, and installed it can be used. Any program that uses ROSE will likely need to be compiled with the same switches and software components as ROSE itself. The easiest way to get this information is by running "rose-config --help".</p>
<p>Here's an example makefile:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# Sample makefile for programs that use the ROSE library.</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;#</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;# ROSE has a number of configuration details that must be present when</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;# compiling and linking a user program with ROSE, and some of these</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;# details are difficult to get right.  The most foolproof way to get</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;# these details into your own makefile is to use the &quot;rose-config&quot;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;# tool.</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;#</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;#</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;# This makefile assumes:</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;#   1. The ROSE library has been properly installed (refer to the</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;#      documentation for configuring, building, and installing ROSE).</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;#</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;#   2. The top of the installation directory is $(ROSE_HOME). This</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;#      is the same directory you specified for the &quot;--prefix&quot; argument</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;#      of the &quot;configure&quot; script, or the &quot;CMAKE_INSTALL_PREFIX&quot; if using</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;#      cmake. E.g., &quot;/usr/local&quot;.</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;#</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;# The &quot;rose-config&quot; tool currently only works for ROSE configured with</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;# GNU auto tools (e.g., you ran &quot;configure&quot; when you built and</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;# installed ROSE). The &quot;cmake&quot; configuration is not currently</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;# supported by &quot;rose-config&quot; [September 2015].</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;##############################################################################</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;#If the ROSE bin directory is in your path, rose-config can be found automatically</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;ifndef ROSE_HOME</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;ROSE_HOME = $(shell rose-config prefix)</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;endif</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;include $(ROSE_HOME)/lib/rose-config.cfg</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;# Standard C++ compiler stuff (see rose-config --help)</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;ROSE_CXX         = $(shell $(ROSE_HOME)/bin/rose-config ROSE_CXX)</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;ROSE_CPPFLAGS    = $(shell $(ROSE_HOME)/bin/rose-config ROSE_CPPFLAGS)</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;ROSE_CXXFLAGS    = $(shell $(ROSE_HOME)/bin/rose-config ROSE_CXXFLAGS)</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;ROSE_LDFLAGS     = $(shell $(ROSE_HOME)/bin/rose-config ROSE_LDFLAGS)</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;ROSE_LIBDIRS     = $(shell $(ROSE_HOME)/bin/rose-config ROSE_LIBDIRS)</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;ROSE_RPATHS      = $(shell $(ROSE_HOME)/bin/rose-config ROSE_RPATHS)</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;ROSE_LINK_RPATHS = $(shell $(ROSE_HOME)/bin/rose-config ROSE_LINK_RPATHS)</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;MOSTLYCLEANFILES =</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;##############################################################################</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;# Assuming your source code is &quot;demo.C&quot; to build an executable named &quot;demo&quot;.</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;all: demo</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;demo.o: demo.C</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        $(ROSE_CXX) $(ROSE_CPPFLAGS) $(ROSE_CXXFLAGS) -o $@ -c $^</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;demo: demo.o</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        $(ROSE_CXX) $(ROSE_CXXFLAGS) -o $@ $^ $(ROSE_LDFLAGS) $(ROSE_LINK_RPATHS) -Wl,-rpath=$(ROSE_HOME)/lib</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;MOSTLYCLEANFILES += demo demo.o</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;##############################################################################</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;# Standard boilerplate</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;.PHONY: clean</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;clean:</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        rm -f $(MOSTLYCLEANFILES)</div>
</div><!-- fragment --> <div class="dynheader">
Collaboration diagram for Build systems:</div>
<div class="dyncontent">
<div class="center"><img src="group__tooldev__makefile.png" border="0" usemap="#group____tooldev____makefile" alt=""/></div>
<map name="group____tooldev____makefile" id="group____tooldev____makefile">
<area shape="rect" href="group__tooldev.html" title="How to build tools based on the ROSE library." alt="" coords="5,5,173,45"/>
<area shape="rect" title=" " alt="" coords="221,13,327,38"/>
</map>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 8 2022 21:18:18 for ROSE by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
